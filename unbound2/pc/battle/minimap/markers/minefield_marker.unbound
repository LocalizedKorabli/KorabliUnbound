
(def element MapMinefieldMarker (_markerEntity:gfx, _mapScale:number, _itemScale:number, _scaleRatio:number) layout=true
	(scope
		(macro GET_MARKER_ENTITY_COMPONENT 'minefield')
		(var isMinefieldActive:bool = "minefieldComponent.isActive" (event "minefieldComponent.evIsActiveChanged"))
		(var isMinefieldVisible:bool = "minefieldComponent.isVisible" (event "minefieldComponent.evIsVisibleChanged"))

		(var circleRadius:number = "_markerEntity.circle.radius" (event "_markerEntity.circle.evRadiusChanged"))

		(var relationStr:str = "toLower(SC.Battle.PLAYER_RELATION.VALUE_TO_NAME[_markerEntity.relation.value])" (event "_markerEntity.relation.evChanged"))
	)
	(bind visible "isMinefieldVisible")
	(macro BIND_FAIR_SCALE "circleRadius")

	(style (position = "absolute"))

	(block
		(bind alpha "isMinefieldActive ? 0.8 : 0.5")
		(controller $Sector
			(bind arc "360")
			(bind radius "MINIMAP_ASSETS_SIZE")
			(bind innerRadius "MINIMAP_ASSETS_SIZE")
			(bind lineThickness "8")
			(bind lineColor "TWO_TEAMS_COLOR[relationStr]")
			(bind dashLength "45")
			(bind spacing "45")
			(bind lineAlpha "1")
		)
	)

	(block
		(bind visible "isMinefieldActive")
		(style (alpha = 0.3))
		(controller $Sector
			(bind arc "360")
			(bind color "TWO_TEAMS_COLOR[relationStr]")
			(bind radius "MINIMAP_MINEFIELD_SIZE")
		)
	)
)